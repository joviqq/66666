<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context" xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:p="http://www.springframework.org/schema/p" xmlns:task="http://www.springframework.org/schema/task" 
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.2.xsd"
        default-lazy-init="true">
     <context:property-placeholder location="classpath*:/config_spring/freepaayManage.properties" ignore-resource-not-found="true" ignore-unresolvable="true" />
    
    <!-- 启动包扫描功能，根据下面配置的路径扫描包成为spring的bean http://blog.csdn.net/chunqiuwei/article/details/16115135 -->
    <context:component-scan base-package="com.freepaay" use-default-filters="false">
        <context:include-filter type="regex" expression="com.freepaay.*.controller.*" />
        <context:include-filter type="regex" expression="com.freepaay.*.mq.*" />
        <context:include-filter type="regex" expression="com.freepaay.*.service.impl.*" />
        <context:include-filter type="regex" expression="com.freepaay.*.bean.*" />
        <context:include-filter type="regex" expression="com.freepaay.*.beanVo.*" />
        <context:include-filter type="regex" expression="com.freepaay.*.mapper.*" />
        <context:include-filter type="regex" expression="com.freepaay.*.util.*" />
        <context:include-filter type="regex" expression="com.freepaay.filter.*" />
        <context:include-filter type="regex" expression="com.freepaay.redis.*" />
        <context:include-filter type="regex" expression="com.freepaay.job.*" />
    </context:component-scan>

    <bean id="springContextUtil" class="com.freepaay.common.SpringContextUtil" />
    
    <!-- 定时任务 -->
	<bean id="taskExecutor" class="org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor">
		<property name="corePoolSize" value="${task.core_pool_size}" />
		<property name="maxPoolSize" value="${task.max_pool_size}" />
		<property name="queueCapacity" value="${task.queue_capacity}" />
		<property name="keepAliveSeconds" value="${task.keep_alive_seconds}" />
	</bean>
	
	<!-- 消费方应用名，用于计算依赖关系，不是匹配条件，不要与提供方一样 -->
    <import resource="dubbo-consumer.xml" />
    <import resource="dubbo-consumer-list\*.xml" />
    
    <!-- 引入activemq -->
    <import resource="activemq.xml" />
    
    <!-- 引入shiro和cas -->
    <import resource="shiro-cas.xml" />

    <!-- 启动定时器 -->
	<task:annotation-driven />
</beans>